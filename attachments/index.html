<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en"> 
  <head> 
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /> 
    <title>Philadelphia :: Compose Report</title>
    <script type="text/javascript" src="js/json2.js"></script>
    <script type="text/javascript" src="js/jquery-1.6.2.min.js"></script>
    <script type="text/javascript" src="js/jquery-ui-1.8.16.custom.min.js"></script>
    <script type="text/javascript" src="/_utils/script/jquery.couch.js?0.9.0"></script> 
    <link type="text/css" rel="stylesheet" href="css/style.css"/>
    <link type="text/css" rel="stylesheet" href="css/jquery-ui-1.8.16.custom.css"/>
    <link type="text/css" rel="stylesheet" href="http://fonts.googleapis.com/css?family=Droid+Sans"/> 	
  </head>
  <body>
    <!-- begin header //-->
    <div id="header">
      <div id="branding">
        <h1 id="site-name">Philadelphia</h1>
      </div>
    </div>
    <br/>
    <!-- end header //-->

    <!-- begin content //-->
    <div id="content">

      <!-- begin report list //-->
      <div style="float:left;width:73%;padding-left:10px">
        <div class="ui-widget-header">
          Shift Reports
          <div id="save" style="float:right;">
            <button type="button" id="new" class="new" onclick="window.location.href='compose.html'">New</button>
          </div>
        </div>
        <div id="reportlist" class="ui-widget-content" style="display:table;width:100%;border:none">
          <div style="display:table-row;background:#ddd">
            <div style="display:table-cell;font-weight:bold;padding:3px">Report ID</div>
            <div style="display:table-cell;font-weight:bold;padding:3px">Time Created</div>
          </div>
        </div>
      </div>
      <!-- end report list //-->

      <!-- begin footer //-->
      <div style="font-size:xx-small;float:right;padding-right:3em">
        <dl>
          <dt><b>Philadelphia,</b></dt>
          <dd><a href="https://github.com/mastbaum/philadelphia">Source on github</a></dd>
          <dd><a href="https://github.com/mastbaum/philadelphia/issues">Report a bug</a></dd>
          <dd>&nbsp;</dd>
          <dd><a href="mailto:mastbaum@hep.upenn.edu">Andy Mastbaum</a></dd>
          <dd>The University of Pennsylvania</dd>
        </dl>
      </div>
      <!-- end footer //-->

    </div>
    <!-- end content //-->

  </body>

  <script>
    $(document).ready(function() {
      $db = $.couch.db("phila");
      $db.view("phila/reports", {
        descending: true,
        success: function(data) {
          for (i in data.rows) {
            var id = data.rows[i].value._id;
            var d = new Date(data.rows[i].value.created);
            var created = d.toLocaleString();
            html = '<div style="display:table-row">' +
              '<div style="display:table-cell;padding:3px;background:' + (i%2?'#d6e6d6':'#f1f1f1') + '">' +
              '<a href="view/' + id + '">' + id + '</a></div>' +
              '<div style="display:table-cell;padding:3px;background:' + (i%2?'#dceede':'#fafafa') + '">' + created + '</div>' +
              '</div>';
            $("div#reportlist").append(html);
          }  
        }
      });
    });
  </script>

</html>

