<style>
 div.item {border: solid 1px black; padding: 0.5em; margin: 0.5em}
</style>

<div style="float:right;width:23%">
  <div class="ui-widget-header">Templates</div>
  <div id="source" class="ui-widget-content ui-corner-all">
    <div class="item">Start <div class="docid"></div></div>
    <div class="item">Hourly <div class="docid"></div></div>
  </div>
</div>

<div style="float:left;width:75%">
  <div class="ui-widget-header">Shift Report</div>
  <div id="target" class="ui-widget-content ui-corner-all">
    <div id="drag_hint" class="ui-state-disabled" style="padding:1.2em">Drag templates here...</div>
  </div>
</div>

<script>
// replace eventually with ajax query to couch?
// for now, thanks, s.o.!
function get_uuid() {
    return 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function(c) {
        var r = Math.random()*16|0, v = c == 'x' ? r : (r&0x3|0x8);
        var x = v.toString(16);
        return(x);
    });
}

$(document).ready(function(){
    $('.docid').html(get_uuid());
});

$( "#source .item" ).draggable({
    connectToSortable: '#target',
    cursor: 'move',
    revert: 'invalid',
    helper: 'clone',
    opacity: 0.7
}).disableSelection();

$( "#target" ).sortable({
    receive: function (e, ui) { inout = 1; },
    over: function (e, ui) { inout = 1; },
    out: function (e, ui) { inout = 0; },
    beforeStop: function (e, ui) { if (inout == 0)  ui.item.remove(); },
    opacity: 0.7,
    dropOnEmpty: true,
    tolerance: 'pointer',
    placeholder: 'placeholder',
    cursor: 'move',
    receive: function(event, ui) {
        $('#drag_hint').fadeOut('slow');
        addDoc(ui.item);
    }
}).disableSelection();

function addDoc( $item ) {
    $item.find('div.docid').html(get_uuid());
}
</script>

